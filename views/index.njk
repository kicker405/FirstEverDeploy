<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Timers</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uikit@3.5.4/dist/css/uikit.min.css" />
  <style>[v-cloak]{display:none;} .mono{font-family:monospace;}</style>
  [% if user %]
  <script>
    window.SESSION_ID = "[[ sessionId ]]";
    window.USER_NAME = "[[ user.userName ]]";
  </script>
  [% endif %]
</head>
<body>
[% if user %]
<section id="app" v-cloak class="uk-container uk-margin-top">
  <p><strong>User: [[ user.userName ]]. <a href="/logout">Log out</a></strong></p>

  <form v-on:submit.prevent="createTimer">
    <input v-model="desc" class="uk-input" placeholder="Description..." />
    <button :disabled="!desc" class="uk-button uk-button-primary">Start</button>
  </form>

  <h2>Active timers:</h2>
  <ul class="uk-list">
    <li v-for="t in activeTimers" :key="t.timerId">
      <span uk-icon="close" v-on:click="stopTimer(t.timerId)"></span>
      <span class="mono">{{ t.progress }}</span>
      <strong>{{ t.timerDescription }}</strong>
      <span class="mono">{{ formatTime(t.timerStart) }}</span>
    </li>
  </ul>

  <h2>Old timers:</h2>
  <ul class="uk-list">
    <li v-for="t in oldTimers" :key="t.timerId">
      <span class="mono">{{ t.duration }}</span>
      <strong>{{ t.timerDescription }}</strong>
      (<span class="mono">{{ formatTime(t.timerStart) }}</span> - <span class="mono">{{ formatTime(t.timerEnd) }}</span>)
    </li>
  </ul>
</section>

<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.jsdelivr.net/npm/uikit@3.5.4/dist/js/uikit.min.js"></script>
<script src="/main.js"></script>
[% else %]
<section class="uk-container uk-margin-top">
  <h2>Login</h2>
  <form method="POST" action="/login">
    <input type="text" name="username" placeholder="username" class="uk-input"/>
    <input type="password" name="password" placeholder="password" class="uk-input"/>
    <button class="uk-button uk-button-primary">Login</button>
  </form>

  <h2>Signup</h2>
  <form method="POST" action="/signup">
    <input type="text" name="username" placeholder="username" class="uk-input"/>
    <input type="password" name="password" placeholder="password" class="uk-input"/>
    <button class="uk-button uk-button-primary">Signup</button>
  </form>
</section>
[% endif %]
</body>
</html>
